!function(t,n){if("function"==typeof define&&define.amd)define("sqroll",["module"],n);else if("undefined"!=typeof exports)n(module);else{var e={exports:{}};n(e),t.sqroll=e.exports}}(this,function(t){"use strict";function o(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var m=/^(?:(top|middle|bottom)|(top|middle|bottom)?([+-]\d+(?:px|vh))?)$/,e=/([+-]?\d+)(px|vh)/;function v(t){if("string"!=typeof t)return t;var n=t.match(e);return n?Number(n[1])*("vh"===n[2]?Math.round(window.innerHeight/100):1):Number(t)||0}function p(t,n,e){var r=Number(n)||0,o=Number(e)||0;if("string"==typeof n){var i=n.match(m);if(i){var u=t.getBoundingClientRect(),a=i[1]||i[2]||"top",c=v(i[3]||0),l=u.top+window.scrollY;"bottom"===a?l+=u.bottom-u.top:"middle"===a&&(l+=(u.bottom-u.top)/2),r=l+c}}if("string"==typeof e){var f=e.match(m);if(f){var s=f[1]||f[2]||"top",d=v(f[3]||0);o=r,"bottom"===s?o-=window.innerHeight:"middle"===s&&(o-=window.innerHeight/2),o+=d}}return o}t.exports=function(){var d=[],t=-1/0;function n(){var n=window.scrollY,e=t<=n?"down":"up";d=d.filter(function(t){return t(n,e)}),t=n}return{track:function(i,t){var u=t.start,a=t.end,c=t.callback,l=p(i,u.when,u.hits),f=p(i,a.when,a.hits)-l,s=!1;d.push(function(t,n){var e=t-l;if(e<0||f<e)return s&&requestAnimationFrame(function(){return c(i,e<0?u.value:a.value,t,n)}),!0;var r=100*e/f,o=a.value>u.value?r*a.value/100+u.value:(100-r)*u.value/100+a.value;return s=!0,requestAnimationFrame(function(){return c(i,o,t,n)}),!0})},trigger:function(r,t){var o=t.callback,n=t.when,e=t.hits,i=p(r,n,e),u=window.scrollY;d.push(function(t,n){var e=t-i;return u<i&&e<0||(i<u&&0<e||(requestAnimationFrame(function(){return o(r,t,n)}),!1))})},viewport:function(i,t){var u=t.onOut,a=t.onIn,n=o((t.offset||"").split(/\s+/),2),e=n[0],r=n[1],c=v(e),l=r?v(r):c,f=!1;d.push(function(t,n){var e=i.getBoundingClientRect(),r=e.top,o=e.bottom;return r+c>window.innerHeight||o-l<0?f&&(f=!1,requestAnimationFrame(function(){return u(i,t,n)})):f||(f=!0,requestAnimationFrame(function(){return a(i,t,n)})),!0})},clear:function(){d=[]},start:function(){document.addEventListener("scroll",n),n()},stop:function(){document.removeEventListener("scroll",n)},destroy:function(){d=[],document.removeEventListener("scroll",n)}}}});