!function(t,n){if("function"==typeof define&&define.amd)define("sqroll",["module"],n);else if("undefined"!=typeof exports)n(module);else{var e={exports:{}};n(e),t.sqroll=e.exports}}(this,function(t){"use strict";function o(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d=/^(?:(top|middle|bottom)|(top|middle|bottom)?([+-]\d+(?:px|vh))?)$/,e=/([+-]?\d+)(px|vh)/;function v(t){if("string"!=typeof t)return t;var n=t.match(e);return n?Number(n[1])*("vh"===n[2]?Math.round(window.innerHeight/100):1):Number(t)||0}function p(t,n,e){var r=Number(n)||0,o=Number(e)||0;if("string"==typeof n){var i=n.match(d);if(i){var u=t.getBoundingClientRect(),a=i[1]||i[2]||"top",c=v(i[3]||0),f=u.top+window.scrollY;"bottom"===a?f+=u.bottom-u.top:"middle"===a&&(f+=(u.bottom-u.top)/2),r=f+c}}if("string"==typeof e){var l=e.match(d);if(l){var s=l[1]||l[2]||"top",m=v(l[3]||0);o=r,"bottom"===s?o-=window.innerHeight:"middle"===s&&(o-=window.innerHeight/2),o+=m}}return o}t.exports=function(){var m=[],t=-1/0;function n(){var n=window.scrollY,e=t<=n?"down":"up";m=m.filter(function(t){return t(n,e)}),t=n}return{track:function(i,t){var u=t.start,a=t.end,c=t.callback,f="number"==typeof u.at?u.at:p(i,u.when,u.hits),l=("number"==typeof a.at?a.at:p(i,a.when,a.hits))-f,s=!1;m.push(function(t,n){var e=t-f;if(e<0||l<e)return s&&requestAnimationFrame(function(){return c(i,e<0?u.value:a.value,t,n)}),!0;var r=100*e/l,o=a.value>u.value?r*a.value/100+u.value:(100-r)*u.value/100+a.value;return s=!0,requestAnimationFrame(function(){return c(i,o,t,n)}),!0})},trigger:function(r,t){var o=t.callback,n=t.when,e=t.hits,i=t.at,u=t.direction,a="number"==typeof i?i:p(r,n,e),c=window.scrollY;m.push(function(t,n){var e=t-a;return(u?"down"===u:c<a)&&e<0||((u?"up"===u:a<c)&&0<e||(requestAnimationFrame(function(){return o(r,t,n)}),!1))})},viewport:function(i,t){var u=t.onOut,a=t.onIn,n=o((t.offset||"").split(/\s+/),2),e=n[0],r=n[1],c=v(e),f=r?v(r):c,l=!1;m.push(function(t,n){var e=i.getBoundingClientRect(),r=e.top,o=e.bottom;return r+c>window.innerHeight||o-f<0?l&&(l=!1,requestAnimationFrame(function(){return u(i,t,n)})):l||(l=!0,requestAnimationFrame(function(){return a(i,t,n)})),!0})},clear:function(){m=[]},start:function(){document.addEventListener("scroll",n),n()},stop:function(){document.removeEventListener("scroll",n)},destroy:function(){m=[],document.removeEventListener("scroll",n)}}}});